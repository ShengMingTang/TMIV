AsciiDoc:
  stage: build
  image: asciidoctor/docker-asciidoctor:1.2
  tags: [ linux ]
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      changes:
        - .gitlab/ci/asciidoc.yml
        - doc/test_model/**/*
  script:
    - cd doc/test_model
    - asciidoctor --backend html5 -a data-uri index.adoc
    - mv index.html ../../test_model.html
    - asciidoctor-pdf -r asciidoctor-mathematical -a pdf-style=pdf_theme.yml index.adoc
    - mv index.pdf ../../test_model.pdf
  artifacts:
    paths:
      - test_model.html
      - test_model.pdf
